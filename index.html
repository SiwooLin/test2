<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>RIMO’S SONG BOOK</title>
  <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      background-color: #000;
      color: #fff;
      font-family: 'Jua', sans-serif;
      text-align: center;
      padding: 40px;
      box-sizing: border-box;
    }
    h1 {
      font-size: 32px;
      margin-bottom: 8px;
      color: #ff6f00;
      cursor: pointer;
    }
    .headlineNotice {
      font-size: 15px;
      margin-bottom: 24px;
      color: #ff6f00;
    }
    .admin-topbar {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 1000;
    }
    .section {
      background-color: #111;
      border: 1px solid #8e44ad;
      box-shadow: 0 0 8px #8e44ad;
      border-radius: 12px;
      padding: 20px;
      margin-top: 20px;
      font-size: 14px;
      line-height: 1.6;
      white-space: pre-line;
      text-align: left;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    table {
      width: 100%;
      max-width: 700px;
      margin: 20px auto;
      border-collapse: collapse;
      font-size: 14px;
    }
    th, td {
      padding: 12px;
      border: 1px solid #8e44ad;
      text-align: center;
    }
    th {
      background-color: #1a1a1a;
    }
    tr:nth-child(even) {
      background-color: #1a1a1a;
    }
    tr:nth-child(odd) {
      background-color: #2a2a2a;
    }
    input, select, button {
      font-family: 'Jua', sans-serif;
      margin: 5px;
    }
    .orange-btn {
      border-color: #ff6f00;
      color: #ff6f00;
      background-color: transparent;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
    }
    .orange-btn:hover {
      background-color: #ff6f00;
      color: #111;
    }
    #admin-controls, #admin-exit, #editForm {
      display: none;
    }
  </style>
</head>
<body>
  <div class="admin-topbar">
    <button class="orange-btn" onclick="toggleAdmin()">관리자 모드</button>
  </div>

  <h1>RIMO’S SONG BOOK</h1>
  <p class="headlineNotice">📌 노래책 설명서와 가격표를 먼저 확인하고 이용해주세요!</p>

  <!-- 설명서 & 가격표 -->
  <div id="manual" class="section">...</div>
  <div id="price" class="section">...</div>

  <!-- 드롭다운 필터 -->
  <div style="margin-top: 20px;">
    <label for="categorySelect">카테고리:</label>
    <select id="categorySelect" onchange="filterSongs()">
      <option value="전체">전체</option>
      <option value="Kpop">K-pop</option>
      <option value="Kpop 아이돌">K-pop 아이돌</option>
      <option value="Pop">Pop</option>
    </select>

    <label for="initialSelect">이니셜:</label>
    <select id="initialSelect" onchange="filterSongs()">
      <option value="전체">전체</option>
      <option value="ㄱ">ㄱ</option>
      <option value="ㄴ">ㄴ</option>
      <option value="ㄷ">ㄷ</option>
      <option value="ㄹ">ㄹ</option>
      <option value="ㅁ">ㅁ</option>
      <option value="ㅂ">ㅂ</option>
      <option value="ㅅ">ㅅ</option>
      <option value="ㅇ">ㅇ</option>
      <option value="ㅈ">ㅈ</option>
      <option value="ㅊ">ㅊ</option>
      <option value="ㅋ">ㅋ</option>
      <option value="ㅌ">ㅌ</option>
      <option value="ㅍ">ㅍ</option>
      <option value="ㅎ">ㅎ</option>
      <option value="A">A</option>
      <option value="B">B</option>
      <option value="C">C</option>
      <option value="D">D</option>
      <option value="E">E</option>
      <option value="F">F</option>
      <option value="G">G</option>
      <option value="H">H</option>
      <option value="I">I</option>
      <option value="J">J</option>
      <option value="K">K</option>
      <option value="L">L</option>
      <option value="M">M</option>
      <option value="N">N</option>
      <option value="O">O</option>
      <option value="P">P</option>
      <option value="Q">Q</option>
      <option value="R">R</option>
      <option value="S">S</option>
      <option value="T">T</option>
      <option value="U">U</option>
      <option value="V">V</option>
      <option value="W">W</option>
      <option value="X">X</option>
      <option value="Y">Y</option>
      <option value="Z">Z</option>
    </select>
  </div>

  <!-- 검색창 -->
  <input type="text" id="searchInput" placeholder="가수 또는 제목 검색" oninput="filterSongs()">

  <!-- 노래 테이블 -->
  <table>
    <thead>
      <tr><th>가수</th><th>제목</th><th>코드</th><th>난이도</th><th>숙련도</th></tr>
    </thead>
    <tbody id="songList"></tbody>
  </table>

  <!-- 관리자용 수정 영역 -->
  <div id="editForm">
    <input type="text" id="editSinger" placeholder="가수">
    <input type="text" id="editTitle" placeholder="제목">
    <input type="text" id="editKey" placeholder="코드">
    <input type="text" id="editDiff" placeholder="난이도">
    <input type="text" id="editSkill" placeholder="숙련도">
    <br>
    <button onclick="saveEdit()">수정 및 저장</button>
    <button id="admin-exit" onclick="exitAdmin()">관리자 모드 종료</button>
  </div>

  <script>
    const songs = [
      { category: 'Kpop 아이돌', initial: 'ㅋ', singer: '큐더블유이알(QWER)', title: '가짜아이돌', key: 'Fm', difficulty: '', skill: '완벽 카피X' },
      { category: 'Kpop', initial: 'ㅇ', singer: '아이유', title: '밤편지', key: 'C', difficulty: '하', skill: '상' },
      { category: 'Pop', initial: 'A', singer: 'Adele', title: 'Hello', key: 'Am', difficulty: '상', skill: '상' },
    ];
    let isAdmin = false;
    let editIndex = -1;

    function renderSongs(list) {
      const tbody = document.getElementById("songList");
      tbody.innerHTML = '';
      list.forEach((s, i) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${s.singer}</td><td>${s.title}</td><td>${s.key}</td><td>${s.difficulty}</td><td>${s.skill}</td>`;
        if (isAdmin) {
          tr.style.cursor = "pointer";
          tr.onclick = () => editSong(i);
        }
        tbody.appendChild(tr);
      });
    }

    function filterSongs() {
      const cat = document.getElementById("categorySelect").value;
      const ini = document.getElementById("initialSelect").value;
      const term = document.getElementById("searchInput").value.toLowerCase();
      const filtered = songs.filter(s => {
        return (cat === '전체' || s.category === cat) &&
               (ini === '전체' || s.initial === ini) &&
               (s.singer.toLowerCase().includes(term) || s.title.toLowerCase().includes(term));
      });
      renderSongs(filtered);
    }

    function toggleAdmin() {
      const pwd = prompt("관리자 비밀번호를 입력하세요");
      if (pwd === "admin123") {
        isAdmin = true;
        document.getElementById("editForm").style.display = "block";
        document.getElementById("admin-exit").style.display = "inline-block";
      } else {
        alert("비밀번호가 틀렸습니다.");
      }
    }

    function exitAdmin() {
      isAdmin = false;
      document.getElementById("editForm").style.display = "none";
      document.getElementById("admin-exit").style.display = "none";
    }

    function editSong(index) {
      editIndex = index;
      const s = songs[index];
      document.getElementById("editSinger").value = s.singer;
      document.getElementById("editTitle").value = s.title;
      document.getElementById("editKey").value = s.key;
      document.getElementById("editDiff").value = s.difficulty;
      document.getElementById("editSkill").value = s.skill;
    }

    function saveEdit() {
      if (editIndex === -1) return;
      songs[editIndex] = {
        ...songs[editIndex],
        singer: document.getElementById("editSinger").value,
        title: document.getElementById("editTitle").value,
        key: document.getElementById("editKey").value,
        difficulty: document.getElementById("editDiff").value,
        skill: document.getElementById("editSkill").value,
      };
      filterSongs();
      alert("수정 완료!");
    }

    filterSongs();
  </script>
</body>
</html>
