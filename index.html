<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>RIMO’S SONG BOOK (Admin Mode)</title>
  <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      background-color: #000;
      color: #fff;
      font-family: 'Jua', sans-serif;
      text-align: center;
      padding: 40px;
      box-sizing: border-box;
    }
    h1 {
      font-size: 32px;
      margin-bottom: 8px;
      color: #ff6f00;
      cursor: pointer;
      user-select: none;
    }
    .headlineNotice {
      font-size: 15px;
      margin-bottom: 24px;
      color: #ff6f00;
    }
    #searchInput {
      width: 320px;
      margin: 0 auto 20px auto;
      display: block;
      padding: 12px;
      font-size: 16px;
      border: 2px solid #8e44ad;
      border-radius: 999px;
      background-color: transparent;
      color: #fff;
      outline: none;
      text-align: center;
      box-sizing: border-box;
      box-shadow: none;
    }
    #searchInput::placeholder {
      color: #d1b3ff;
    }
    #searchInput:focus {
      border-color: #bb99ff;
      box-shadow: none;
    }
    button {
      padding: 6px 10px;
      font-size: 14px;
      background-color: #111;
      color: #ff6f00;
      border-radius: 20px;
      cursor: pointer;
      margin: 3px 5px;
      border: 1px solid #ff6f00;
      user-select: none;
      transition: background-color 0.3s, color 0.3s;
      min-width: 40px;
    }
    button:hover {
      background-color: #ff6f00;
      color: #111;
    }
    .active-btn {
      background-color: #ff6f00 !important;
      color: #111 !important;
      border-color: #ff6f00 !important;
    }
    .section {
      background-color: #111;
      border: 1px solid #8e44ad;
      box-shadow: 0 0 8px #8e44ad;
      border-radius: 12px;
      padding: 20px;
      margin-top: 20px;
      font-size: 14px;
      line-height: 1.6;
      white-space: pre-line;
      text-align: left;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    #adminForm {
      display: none;
      margin-top: 20px;
      text-align: left;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      padding: 20px;
      background: #222;
      border: 1px dashed #8e44ad;
      border-radius: 12px;
    }
    #adminForm input, #adminForm select {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      border-radius: 6px;
      border: 1px solid #8e44ad;
      background: #000;
      color: #fff;
      box-sizing: border-box;
    }
    table {
      width: 100%;
      max-width: 700px;
      margin: 20px auto;
      border-collapse: separate;
      border-spacing: 0;
      font-size: 14px;
      display: none;
    }
    th, td {
      padding: 12px;
      text-align: center;
    }
    th {
      background-color: #1a1a1a;
      border: 1px solid #8e44ad;
    }
    th:not(:last-child) {
      border-right: 1px solid #8e44ad;
    }
    tbody td:not(:last-child) {
      border-right: 1px dotted #8e44ad;
    }
    tbody tr:nth-child(even) {
      background-color: #1a1a1a;
    }
    tbody tr:nth-child(odd) {
      background-color: #2a2a2a;
    }
    #noResult {
      display: none;
      color: #ff6f00;
      margin-top: 20px;
      font-size: 15px;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1 onclick="toggleSection('manual')">RIMO’S SONG BOOK (Admin)</h1>
  <p class="headlineNotice">📌 노래책 설명서와 가격표를 먼저 확인하고 이용해주세요!</p>
  <div>
    <button onclick="toggleSection('manual')">노래책 설명서</button>
    <button onclick="toggleSection('price')">가격표</button>
    <button onclick="toggleSection('songs')">노래 목록</button>
    <button onclick="toggleAdmin()">관리자모드</button>
  </div>

  <div id="manual" class="section" style="display:none;">
    • 노래 신청을 할땐 꼭!!! 가수와 곡 제목을 함께 적어서 신청해주세요. (코드도 적어주시면 감사합니다!)<br/>
    • 컨디션에 따라 부르기 어렵다고 판단 될 경우 신청곡을 거절 할 수도 있습니다. (거절 당한 신청은 기본 노래 2곡으로 대체 가능 합니다.)<br/>
    • 설명을 읽지 않고 신청할 경우 책임은 신청자에게 있습니다.<br/>
    • 추천 곡은 디스코드 노래 추천방에 적어주세요.<br/><br/>
    ❌ 과도한 평가와 훈수는 자제 해주세요 ❌
  </div>

  <div id="price" class="section" style="display:none;">
    • 기본 노래 신청은 2000치즈 혹은 투네이션으로 신청 가능합니다.<br/>
    • 어려운 노래 신청은 5000치즈 혹은 투네이션으로 신청 가능합니다.<br/>
    • 유료곡 노래 신청은 10000치즈 이상 혹은 투네이션으로 신청 가능합니다.<br/>
    • 개인 소장 노래 녹음본 (믹싱 유무 선택 가능)은 200,000치즈 혹은 투네이션으로 신청 가능합니다.
  </div>

  <div id="songs" class="section" style="display:none;">
    <input type="text" id="searchInput" placeholder="가수 / 제목 검색" oninput="filterSongs()">
    <table id="songTable">
      <thead>
        <tr><th>가수</th><th>제목</th><th>코드</th><th>난이도</th><th>숙련도</th></tr>
      </thead>
      <tbody id="songList"></tbody>
    </table>
    <p id="noResult">검색 결과가 없습니다. 추천 곡은 디스코드 노래 추천방에 적어주세요.</p>
  </div>

  <form id="adminForm" onsubmit="addNewSong(event)">
    <h3>곡 추가 (관리자 전용)</h3>
    <input id="singer" placeholder="가수" required />
    <input id="title" placeholder="제목" required />
    <input id="key" placeholder="코드" />
    <input id="difficulty" placeholder="난이도" />
    <input id="skill" placeholder="숙련도" />
    <input id="category" placeholder="카테고리" required />
    <input id="initial" placeholder="초성 (ㄱ,ㄴ,A 등)" required />
    <button type="submit">곡 추가 / 수정</button>
  </form>

<script>
let isAdmin = false;
let songs = [
  {category:'Kpop 아이돌', initial:'ㅋ', singer:'큐더블유이알(QWER)', title:'가짜아이돌', key:'Fm', difficulty:'', skill:'완벽 카피X'},
  {category:'Kpop', initial:'ㅇ', singer:'아이유', title:'밤편지', key:'C', difficulty:'하', skill:'상'},
  {category:'Pop', initial:'A', singer:'Adele', title:'Hello', key:'Am', difficulty:'상', skill:'상'},
  {category:'Kpop 아이돌', initial:'ㅇ', singer:'오마이걸', title:'Dun Dun Dance', key:'E', difficulty:'중', skill:'중'},
  {category:'Kpop', initial:'ㄴ', singer:'뉴진스', title:'Hype Boy', key:'D', difficulty:'중', skill:'중'},
  {category:'Kpop 아이돌', initial:'ㅂ', singer:'방탄소년단', title:'Dynamite', key:'G', difficulty:'중', skill:'중'}
];

function toggleSection(id) {
  ['manual','price','songs'].forEach(sec => {
    document.getElementById(sec).style.display = (sec === id) ? 'block' : 'none';
  });
  document.getElementById('adminForm').style.display = (isAdmin && id === 'songs') ? 'block' : 'none';
  filterSongs();
}

function toggleAdmin() {
  isAdmin = !isAdmin;
  alert('관리자 모드 ' + (isAdmin ? 'ON' : 'OFF'));
  document.getElementById('adminForm').style.display = (isAdmin && document.getElementById('songs').style.display === 'block') ? 'block' : 'none';
}

function filterSongs() {
  const val = document.getElementById('searchInput').value.toLowerCase();
  const filtered = songs.filter(s =>
    s.singer.toLowerCase().includes(val) ||
    s.title.toLowerCase().includes(val)
  );
  const list = document.getElementById('songList');
  list.innerHTML = '';
  if (filtered.length === 0) {
    document.getElementById('songTable').style.display = 'none';
    document.getElementById('noResult').style.display = 'block';
  } else {
    document.getElementById('songTable').style.display = 'table';
    document.getElementById('noResult').style.display = 'none';
    filtered.forEach(s => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${s.singer}</td><td>${s.title}</td><td>${s.key}</td><td>${s.difficulty}</td><td>${s.skill}</td>`;
      list.appendChild(tr);
    });
  }
}

function addNewSong(e) {
  e.preventDefault();
  const s = {
    singer: document.getElementById('singer').value,
    title: document.getElementById('title').value,
    key: document.getElementById('key').value,
    difficulty: document.getElementById('difficulty').value,
    skill: document.getElementById('skill').value,
    category: document.getElementById('category').value,
    initial: document.getElementById('initial').value
  };
  const index = songs.findIndex(song => song.singer === s.singer && song.title === s.title);
  if (index !== -1) songs[index] = s;
  else songs.push(s);
  alert('곡이 저장되었습니다.');
  filterSongs();
  e.target.reset();
}

toggleSection('manual');
</script>
</body>
</html>
