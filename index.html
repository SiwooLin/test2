<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RIMO's SONG BOOK</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');
  body {
    margin: 0;
    font-family: 'Jua', sans-serif;
    background-color: #222;
    color: #eee;
  }
  h1 {
    text-align: center;
    margin-top: 20px;
    cursor: pointer;
  }
  /* 기존 스타일 유지 */

  /* 비밀번호 모달 오버레이 */
  #pwModalOverlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: rgba(0,0,0,0.75);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 10000;
  }
  #pwModal {
    background-color: #222;
    padding: 24px 32px;
    border-radius: 16px;
    box-shadow: 0 0 20px #8e44ad;
    text-align: center;
    max-width: 320px;
    width: 90%;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  /* 버튼 기본 스타일 */
  button {
    background-color: #8e44ad;
    border: none;
    color: white;
    padding: 10px 16px;
    font-size: 1rem;
    border-radius: 8px;
    cursor: pointer;
  }
  button:hover {
    background-color: #b55de5;
  }

  /* 설명서, 가격표 기본 텍스트 영역 */
  #manual, #price {
    white-space: pre-wrap;
    margin: 10px 20px;
  }

  /* textarea 스타일 */
  textarea {
    font-family: 'Jua', monospace;
    font-size: 1rem;
    border-radius: 8px;
    border: 1px solid #8e44ad;
    background-color: #333;
    color: #eee;
    padding: 8px;
  }
</style>
</head>
<body>

<h1 onclick="resetToDefault()" title="홈으로 이동">RIMO's SONG BOOK 🎵</h1>

<div style="text-align:center; margin-bottom: 20px;">
  <button onclick="showSection('manual'); toggleEditSection('manual')">노래책 설명서</button>
  <button onclick="showSection('price'); toggleEditSection('price')">가격표</button>
  <!-- 기타 버튼 유지 -->
</div>

<!-- 주요 섹션 -->
<div id="manual">• 노래 신청을 할땐 꼭!!! 가수와 곡 제목을 함께 적어서 신청해주세요.
(코드도 적어주시면 감사합니다!)
• 컨디션에 따라 부르기 어렵다고 판단 될 경우 신청곡을 거절 할 수도 있습니다.
(거절 당한 신청은 기본 노래 2곡으로 대체 가능 합니다.)
• 설명을 읽지 않고 신청할 경우 책임은 신청자에게 있습니다.
• 추천 곡은 디스코드 노래 추천방에 적어주세요.

❌ 과도한 평가와 훈수는 자제 해주세요 ❌</div>

<div id="price">• 기본 노래 신청은 2000치즈 혹은 투네이션으로 신청 가능합니다.
• 어려운 노래 신청은 5000치즈 혹은 투네이션으로 신청 가능합니다.
• 유료곡 노래 신청은 10000치즈 이상 혹은 투네이션으로 신청 가능합니다.
• 개인 소장 노래 녹음본 (믹싱 유무 선택 가능)은 200,000치즈 혹은 투네이션으로 신청 가능합니다.</div>

<!-- 비밀번호 모달 -->
<div id="pwModalOverlay">
  <div id="pwModal">
    <h2>관리자 모드 로그인</h2>
    <input id="passwordInput" type="password" placeholder="비밀번호 입력" autofocus />
    <button onclick="checkPassword()">로그인</button>
    <div id="pwMsg" style="color:#f88; margin-top:8px; min-height:20px;"></div>
  </div>
</div>

<script>
  // 관리자 모드 여부
  let isAdminMode = false;

  // 비밀번호 체크 함수 (비밀번호는 예: 'admin123')
  function checkPassword() {
    const pw = document.getElementById('passwordInput').value;
    const msgDiv = document.getElementById('pwMsg');
    if (pw === 'admin123') {
      isAdminMode = true;
      closePwModal();
      alert('관리자 모드에 접속했습니다.');
    } else {
      msgDiv.textContent = '비밀번호가 틀렸습니다.';
    }
  }

  // 비밀번호 모달 닫기
  function closePwModal() {
    document.getElementById('pwModalOverlay').style.display = 'none';
    document.getElementById('passwordInput').value = '';
    document.getElementById('pwMsg').textContent = '';
  }

  // 초기 화면 복원 함수 (예시)
  function resetToDefault() {
    // 기존 동작 유지 (기본 보여주기 등)
    showSection('manual');
  }

  // 섹션 보여주기 (기본 원본 유지)
  function showSection(section) {
    // manual, price 섹션 토글 예시
    document.getElementById('manual').style.display = 'none';
    document.getElementById('price').style.display = 'none';
    if (section === 'manual') {
      document.getElementById('manual').style.display = 'block';
    } else if (section === 'price') {
      document.getElementById('price').style.display = 'block';
    }
  }

  // 초기 실행: 노래책 설명서 보여주기
  showSection('manual');

  // 편집 모드 플래그
  let manualEditing = false;
  let priceEditing = false;

  // 원본 설명서와 가격표 텍스트 저장
  let manualText = document.getElementById('manual').textContent;
  let priceText = document.getElementById('price').textContent;

  // 편집 영역 참조
  const manualDiv = document.getElementById('manual');
  const priceDiv = document.getElementById('price');

  // 편집 모드 토글 함수
  function toggleEditSection(section) {
    if (!isAdminMode) return; // 관리자 아니면 편집 불가

    if (section === 'manual') {
      if (!manualEditing) {
        enterEditMode('manual');
      } else {
        exitEditMode('manual');
      }
    } else if (section === 'price') {
      if (!priceEditing) {
        enterEditMode('price');
      } else {
        exitEditMode('price');
      }
    }
  }

  // 편집 모드 진입
  function enterEditMode(section) {
    if (section === 'manual') {
      manualEditing = true;
      manualDiv.innerHTML = '';

      const textarea = document.createElement('textarea');
      textarea.id = 'manualEditArea';
      textarea.style.width = '100%';
      textarea.style.height = '200px';
      textarea.value = manualText;
      manualDiv.appendChild(textarea);

      const btnSave = document.createElement('button');
      btnSave.textContent = '저장';
      btnSave.style.marginRight = '8px';
      btnSave.onclick = () => saveEdit('manual');

      const btnCancel = document.createElement('button');
      btnCancel.textContent = '취소';
      btnCancel.onclick = () => cancelEdit('manual');

      const btnDiv = document.createElement('div');
      btnDiv.style.marginTop = '12px';
      btnDiv.appendChild(btnSave);
      btnDiv.appendChild(btnCancel);

      manualDiv.appendChild(btnDiv);
    } else if (section === 'price') {
      priceEditing = true;
      priceDiv.innerHTML = '';

      const textarea = document.createElement('textarea');
      textarea.id = 'priceEditArea';
      textarea.style.width = '100%';
      textarea.style.height = '200px';
      textarea.value = priceText;
      priceDiv.appendChild(textarea);

      const btnSave = document.createElement('button');
      btnSave.textContent = '저장';
      btnSave.style.marginRight = '8px';
      btnSave.onclick = () => saveEdit('price');

      const btnCancel = document.createElement('button');
      btnCancel.textContent = '취소';
      btnCancel.onclick = () => cancelEdit('price');

      const btnDiv = document.createElement('div');
      btnDiv.style.marginTop = '12px';
      btnDiv.appendChild(btnSave);
      btnDiv.appendChild(btnCancel);

      priceDiv.appendChild(btnDiv);
    }
  }

  // 편집 모드 종료 (텍스트 원복)
  function exitEditMode(section) {
    if (section === 'manual') {
      manualEditing = false;
      manualDiv.textContent = manualText;
    } else if (section === 'price') {
      priceEditing = false;
      priceDiv.textContent = priceText;
    }
  }

  // 편집 저장
  function saveEdit(section) {
    if (section === 'manual') {
      const textarea = document.getElementById('manualEditArea');
      manualText = textarea.value;
      exitEditMode('manual');
      alert('노래책 설명서가 저장되었습니다.');
    } else if (section === 'price') {
      const textarea = document.getElementById('priceEditArea');
      priceText = textarea.value;
      exitEditMode('price');
      alert('가격표가 저장되었습니다.');
    }
  }

  // 편집 취소
  function cancelEdit(section) {
    exitEditMode(section);
  }
</script>

</body>
</html>
